<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../layout/flexbox-grid.html">
<link rel="import" href="../../components/nylon-panel-card/nylon-panel-card.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/vaadin-combo-box/vaadin-combo-box.html">
<link rel="import" href="../../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../layout/shared-styles.html">
<link rel="import" href="../../redux-mixin.html">
<link rel="import" href="../../redux/register/register-redux.html">
<link rel="import" href="../../i18n/register/main-i18n.html">
<dom-module id="page-register">
    <template>
        <style include="flexbox-grid shared-styles">
            .box {
                position: fixed;
                top: 50%;
                left: 50%;
                width: 30em;
                height: 18em;
                margin-top: -9em;
                /*set to a negative number 1/2 of your height*/
                margin-left: -15em;
                /*set to a negative number 1/2 of your width*/
            }
        </style>
        <div class="box">
            <nylon-panel-card id="panelCard">
                <div slot="header" class="">
                    <div class="middle-md row around-md">
                        <h3>[[i18n.register.title]]</h3>
                    </div>
                </div>
                <div slot="content" class="middle-md">

                    <div class="col-xs-12">
                        <paper-input id="inputTaxNo" label="[[i18n.register.taxno]]" value="{{data.taxno}}" allowed-pattern="[0-9]" maxlength="13"
                            required></paper-input>
                    </div>
                    <div class="col-xs-12">
                        <vaadin-combo-box id="comboTypeAss" label="[[i18n.register.level]]" items='{{typeAssessor}}' value="{{data.type_assessor_id}}"
                            item-label-path="type_assessor_name" item-value-path="id">
                            <template>
                                [[item.type_assessor_name]]
                            </template>
                        </vaadin-combo-box>
                    </div>
                </div>
                <app-toolbar slot="footer">
                    <div main-title></div>
                    <paper-button raised class="btn-success" on-click="_register">
                        <iron-icon icon="social:person-add"></iron-icon>&nbsp;[[i18n.button.register]]
                    </paper-button>
                </app-toolbar>
            </nylon-panel-card>
        </div>
        <!-- <div class="container">
            <div class="col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8 col-xs-offset-1 col-xs-10">
                <nylon-panel-card id="panelCard">
                    <div slot="content" class="middle-md">
                        <h3>[[i18n.register.title]]</h3>
                        <div class="col-xs-12">
                            <paper-input id="inputTaxNo" label="[[i18n.register.taxno]]" value="{{data.taxno}}" allowed-pattern="[0-9]" maxlength="13"
                                required></paper-input>
                        </div>
                        <div class="col-xs-12">
                            <vaadin-combo-box id="comboTypeAss" label="[[i18n.register.level]]" items='{{typeAssessor}}' value="{{data.type_assessor_id}}"
                                item-label-path="type_assessor_name" item-value-path="id">
                                <template>
                                    [[item.type_assessor_name]]
                                </template>
                            </vaadin-combo-box>
                        </div>
                    </div>
                    <app-toolbar slot="footer">
                        <div main-title></div>
                        <paper-button raised class="btn-success" on-click="_register">
                            <iron-icon icon="social:person-add"></iron-icon>&nbsp;[[i18n.button.register]]
                        </paper-button>
                    </app-toolbar>
                </nylon-panel-card>
            </div>
        </div> -->
    </template>

    <script>
        /**
         * `page-register` Description
         *
         * @summary ShortDescription.
         * @customElement
         * @polymer
         * @extends {Polymer.Element}
         */
        class PageRegister extends ReduxMixin(Polymer.Element) {
            /**
             * String providing the tag name to register the element under.
             */
            static get is() {
                return 'page-register';
            }

            /**
             * Object describing property-related metadata used by Polymer features
             */
            static get properties() {
                return {
                    i18n: {
                        type: Object,
                        statePath: 'i18n'
                    },
                    typeAssessor: {
                        type: Array,
                        statePath: 'register.typeAssessor'
                    },
                    data: {
                        type: Object,
                        value: {
                            taxno: '',
                            type_assessor_id: 1
                        }
                    }
                };
            }

            /**
             * Instance of the element is created/upgraded. Use: initializing state,
             * set up event listeners, create shadow dom.
             * @constructor
             */
            constructor() {
                super();
            }

            /**
             * Use for one-time configuration of your component after local DOM is initialized. 
             */
            ready() {
                super.ready();

            }

            nylonPagesActive() {
                Nylon.dispatch('REGISTER_GET_TYPE_ASSESSOR')
            }
            _register(e) {
                if (this.$.inputTaxNo.validate()) {
                    if (this.$.comboTypeAss.value == '') {
                        this.$.comboTypeAss.open();
                        return false;
                    } else {
                        Nylon.dispatch('REGISTER_POST', this.data)
                    }
                }
            }

        }

        window.customElements.define(PageRegister.is, PageRegister);
    </script>
</dom-module>